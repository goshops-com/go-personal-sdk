const ImageSearch=function(){let e={};async function i(i,a){let n;e.startLoading?e.startLoading():(n=function e(){let i=document.createElement("div");return i.id="gopersonal-image-search-loadingIndicator",i.style.display="none",i.innerHTML='<div class="gopersonal-image-search-spinner"></div>',i}(),document.body.appendChild(n),n.style.display="flex");let t=new FormData;t.append("image",i);try{let r=window.gsSDK.getSession().sessionId+"-"+new Date().getTime(),o=window.location.search.includes("gsIncludeDraft=true")?"&gsIncludeDraft=true":"",d={limit:e.limit||1},s=await window.gsSDK.imageSearch(t,d);if(e.hideLoading?e.hideLoading():n&&(n.style.display="none",document.body.removeChild(n)),s.hits&&s.hits.length>0){let l=s.hits[0].name,g=`/catalogo?q=${l}&_gsSearchId=${r}${o}`;a(null,{url:g,data:s})}else a(null,{data:s})}catch(c){e.hideLoading?e.hideLoading():n&&(n.style.display="none",document.body.removeChild(n)),console.error("Error during image search:",c),a(c)}}return{open:function(a={},n){e.initialized?e={...e,...a}:(!function i(a={}){(e={...a}).startLoading&&e.hideLoading||function e(){let i=document.createElement("style");i.textContent=`
    #gopersonal-image-search-loadingIndicator {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .gopersonal-image-search-spinner {
        border: 5px solid #f3f3f3;
        border-top: 5px solid #3498db;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: gopersonal-image-search-spin 1s linear infinite;
    }
    @keyframes gopersonal-image-search-spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`,document.head.appendChild(i)}()}(a),e.initialized=!0);let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async e=>{let a=e.target.files[0];a&&i(a,n)},t.click()}}}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=ImageSearch:window.ImageSearch=ImageSearch;